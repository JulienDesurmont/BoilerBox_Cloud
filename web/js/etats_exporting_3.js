(function(t){var u=t.Chart,a=t.addEvent,h=t.removeEvent,n=t.createElement,l=t.discardElement,s=t.css,o=t.merge,i=t.each,e=t.extend,m=Math.max,r=document,d=window,g=t.isTouchDevice,x=t.Renderer.prototype.symbols,p=t.getOptions(),c;e(p.lang,{printChart:'Print chart',downloadPNG:'Download PNG image',downloadJPEG:'Download JPEG image',downloadPDF:'Download PDF document',downloadSVG:'Download SVG vector image',contextButtonTitle:'Chart context menu'});p.navigation={menuStyle:{border:'1px solid #A0A0A0',background:'#FFFFFF',padding:'5px 0'},menuItemStyle:{padding:'0 10px',background:'none',color:'#303030',fontSize:g?'14px':'11px'},menuItemHoverStyle:{background:'#4572A5',color:'#FFFFFF'},buttonOptions:{symbolFill:'#E0E0E0',symbolSize:14,symbolStroke:'#666',symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:'right',buttonSpacing:3,height:22,theme:{fill:'white',stroke:'none'},verticalAlign:'top',width:24}};p.exporting={type:'image/png',url:'http://export.highcharts.com/',buttons:{contextButton:{menuClassName:'highcharts-contextmenu',symbol:'menu',_titleKey:'contextButtonTitle',menuItems:[{textKey:'printChart',onclick:function(){this.print()}},{separator:!0},{textKey:'downloadPNG',onclick:function(){this.exportChart()}},{textKey:'downloadJPEG',onclick:function(){this.exportChart({type:'image/jpeg'})}},{textKey:'downloadPDF',onclick:function(){this.exportChart({type:'application/pdf'})}},{textKey:'downloadSVG',onclick:function(){this.exportChart({type:'image/svg+xml'})}}]}}};t.post=function(t,e,i){var a,t=n('form',o({method:'post',action:t,enctype:'multipart/form-data'},i),{display:'none'},r.body);for(a in e)n('input',{type:'hidden',name:a,value:e[a]},null,t);t.submit();l(t)};e(u.prototype,{getSVG:function(a){var c=this,h,s,d,u,p=o(c.options,a);if(!r.createElementNS)r.createElementNS=function(t,e){return r.createElement(e)};a=n('div',null,{position:'absolute',top:'-9999em',width:c.chartWidth+'px',height:c.chartHeight+'px'},r.body);s=c.renderTo.style.width;u=c.renderTo.style.height;s=p.exporting.sourceWidth||p.chart.width||/px$/.test(s)&&parseInt(s,10)||600;u=p.exporting.sourceHeight||p.chart.height||/px$/.test(u)&&parseInt(u,10)||400;e(p.chart,{animation:!1,renderTo:a,forExport:!0,width:s,height:u});p.exporting.enabled=!1;p.series=[];i(c.series,function(t){d=o(t.options,{animation:!1,showCheckbox:!1,visible:t.visible});d.isInternal||p.series.push(d)});h=new t.Chart(p,c.callback);i(['xAxis','yAxis'],function(t){i(c[t],function(e,n){var i=h[t][n],o=e.getExtremes(),r=o.userMin,o=o.userMax;i&&(r!==void 0||o!==void 0)&&i.setExtremes(r,o,!0,!1)})});s=h.container.innerHTML;p=null;h.destroy();l(a);s=s.replace(/zIndex="[^"]+"/g,'').replace(/isShadow="[^"]+"/g,'').replace(/symbolName="[^"]+"/g,'').replace(/jQuery[0-9]+="[^"]+"/g,'').replace(/url\([^#]+#/g,'url(#').replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g,' xlink:href=').replace(/\n/,' ').replace(/<\/svg>.*?$/,'</svg>').replace(/&nbsp;/g,' ').replace(/&shy;/g,'­').replace(/<IMG /g,'<image ').replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g,' ').replace(/:(path|rect)/g,'$1').replace(/style="([^"]+)"/g,function(t){return t.toLowerCase()});return s=s.replace(/(url\(#highcharts-[0-9]+)&quot;/g,'$1').replace(/&quot;/g,'\'')},exportChart:function(e,n){var e=e||{},i=this.options.exporting,i=this.getSVG(o({chart:{borderRadius:0}},i.chartOptions,n,{exporting:{sourceWidth:e.sourceWidth||i.sourceWidth,sourceHeight:e.sourceHeight||i.sourceHeight}})),e=o(this.options.exporting,e);t.post(e.url,{filename:e.filename||'chart',type:e.type,width:e.width||0,scale:e.scale||2,svg:i},e.formAttributes)},print:function(){var t=this,e=t.container,n=[],s=e.parentNode,o=r.body,a=o.childNodes;if(!t.isPrinting)t.isPrinting=!0,i(a,function(t,e){if(t.nodeType===1)n[e]=t.style.display,t.style.display='none'}),o.appendChild(e),d.focus(),d.print(),setTimeout(function(){s.appendChild(e);i(a,function(t,e){if(t.nodeType===1)t.style.display=n[e]});t.isPrinting=!1},1E3)},contextMenu:function(t,r,p,u,b,x,f){var o=this,y=o.options.navigation,v=y.menuItemStyle,w=o.chartWidth,S=o.chartHeight,k='cache-'+t,l=o[k],c=m(b,x),d,g,E,C=function(e){o.pointer.inClass(e.target,t)||g()};if(!l)o[k]=l=n('div',{className:t},{position:'absolute',zIndex:1E3,padding:c+'px'},o.container),d=n('div',null,e({MozBoxShadow:'3px 3px 10px #888',WebkitBoxShadow:'3px 3px 10px #888',boxShadow:'3px 3px 10px #888'},y.menuStyle),l),g=function(){s(l,{display:'none'});f&&f.setState(0);o.openMenu=!1},a(l,'mouseleave',function(){E=setTimeout(g,500)}),a(l,'mouseenter',function(){clearTimeout(E)}),a(document,'mouseup',C),a(o,'destroy',function(){h(document,'mouseup',C)}),i(r,function(t){if(t){var i=t.separator?n('hr',null,null,d):n('div',{onmouseover:function(){s(this,y.menuItemHoverStyle)},onmouseout:function(){s(this,v)},onclick:function(){g();t.onclick.apply(o,arguments)},innerHTML:t.text||o.options.lang[t.textKey]},e({cursor:'pointer'},v),d);o.exportDivElements.push(i)}}),o.exportDivElements.push(d,l),o.exportMenuWidth=l.offsetWidth,o.exportMenuHeight=l.offsetHeight;r={display:'block'};p+o.exportMenuWidth>w?r.right=w-p-b-c+'px':r.left=p-c+'px';u+x+o.exportMenuHeight>S&&f.alignOptions.verticalAlign!=='top'?r.bottom=S-u-c+'px':r.top=u+x-c+'px';s(l,r);o.openMenu=!0},addButton:function(i){var a=this,h=a.renderer,n=o(a.options.navigation.buttonOptions,i),d=n.onclick,m=n.menuItems,g,r,f={stroke:n.symbolStroke,fill:n.symbolFill},p=n.symbolSize||12;if(!a.btnCount)a.btnCount=0;if(!a.exportDivElements)a.exportDivElements=[],a.exportSVGElements=[];if(n.enabled!==!1){var s=n.theme,l=s.states,x=l&&l.hover,l=l&&l.select,u;delete s.states;d?u=function(){d.apply(a,arguments)}:m&&(u=function(){a.contextMenu(r.menuClassName,m,r.translateX,r.translateY,r.width,r.height,r);r.setState(2)});n.text&&n.symbol?s.paddingLeft=t.pick(s.paddingLeft,25):n.text||e(s,{width:n.width,height:n.height,padding:0});r=h.button(n.text,0,0,u,s,x,l).attr({title:a.options.lang[n._titleKey],'stroke-linecap':'round'});r.menuClassName=i.menuClassName||'highcharts-menu-'+a.btnCount++;n.symbol&&(g=h.symbol(n.symbol,n.symbolX-p/2,n.symbolY-p/2,p,p).attr(e(f,{'stroke-width':n.symbolStrokeWidth||1,zIndex:1})).add(r));r.add().align(e(n,{width:r.width,x:t.pick(n.x,c)}),!0,'spacingBox');c+=(r.width+n.buttonSpacing)*(n.align==='right'?-1:1);a.exportSVGElements.push(r,g)}},destroyExport:function(t){var t=t.target,n,e;for(n=0;n<t.exportSVGElements.length;n++)if(e=t.exportSVGElements[n])e.onclick=e.ontouchstart=null,t.exportSVGElements[n]=e.destroy();for(n=0;n<t.exportDivElements.length;n++)e=t.exportDivElements[n],h(e,'mouseleave'),t.exportDivElements[n]=e.onmouseout=e.onmouseover=e.ontouchstart=e.onclick=null,l(e)}});x.menu=function(t,e,n,o){return['M',t,e+2.5,'L',t+n,e+2.5,'M',t,e+o/2+0.5,'L',t+n,e+o/2+0.5,'M',t,e+o-1.5,'L',t+n,e+o-1.5]};u.prototype.callbacks.push(function(t){var e,n=t.options.exporting,o=n.buttons;c=0;if(n.enabled!==!1){for(e in o)t.addButton(o[e]);a(t,'destroy',t.destroyExport)}})})(Highcharts);